"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var defaultParameters={observer:{},infinite:!1},Anim=function(){function n(t,e){_classCallCheck(this,n),this.el=t,this.options=_objectSpread2({},defaultParameters,{},e),this.iteration=1,this.delay=1e3,this.state={enter:!1,animating:!1}}return _createClass(n,[{key:"init",value:function(){this.animate()}},{key:"animateEls",value:function(t,n){var i=this;t.forEach(function(t){var e=t.target;i.animationName=e.getAttribute("data-anim-name"),i.animationName&&(i.animationDuration=e.getAttribute("data-anim-duration")||"1s",i.animationDelay=e.getAttribute("data-anim-delay")||"0s",i.animationIterations=+e.getAttribute("data-anim-iterations"),i.state.enter||(e.style.opacity="0"),t.isIntersecting&&!i.state.animating?(i.state.enter=!0,i.state.animating=!0,e.classList.add(i.animationName),e.style.animationDuration=i.animationDuration,e.style.animationDelay=i.animationDelay,i.delay=1e3*(+i.animationDuration.slice(0,-1)+ +i.animationDelay.slice(0,-1)),setTimeout(function(){i.iteration+=1,e.style.opacity="1",i.state.animating=!1,i.animationIterations?i.state.enter&&i.animationIterations===i.iteration-1&&n.unobserve(e):i.state.enter&&!i.options.infinite&&n.unobserve(e)},i.delay),i.onEnter&&i.onEnter()):((0<i.animationIterations&&!i.state.animating||i.options.infinite&&!i.state.animating||!i.state.animating&&!i.state.enter)&&(e.classList.remove(i.animationName),e.style.animationDuration="",e.style.animationDelay="",e.style.opacity="0"),i.options.infinite?i.state.enter=!1:i.state.animating?setTimeout(function(){i.state.enter=!1},i.delay):i.state.enter=!1))})}},{key:"animate",value:function(){this.observer=new IntersectionObserver(this.animateEls.bind(this),this.options.observer),this.observer.observe(this.el)}}]),n}();module.exports=Anim;
