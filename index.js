"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ownKeys(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(i,!0).forEach(function(e){_defineProperty(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var defaultParameters={observer:{},infinite:!1},Anim=function(){function i(e,t){_classCallCheck(this,i),this.el=e,this.options=_objectSpread2({},defaultParameters,{},t),this.iteration=0,this.delay=1e3,this.state={enter:!1,animating:!1}}return _createClass(i,[{key:"getAnimationOptions",value:function(){this.animationDuration=this.el.getAttribute("data-anim-duration")||"1s",this.animationDelay=this.el.getAttribute("data-anim-delay")||"0s",this.animationIterations=+this.el.getAttribute("data-anim-iterations")||1,this.animationTimingFunction=this.el.getAttribute("data-anim-ease")||"ease"}},{key:"showElement",value:function(){this.el.style.visibility="visible",this.el.classList.add(this.animationName),this.el.style.animationDuration=this.animationDuration,this.el.style.animationDelay=this.animationDelay,this.el.style.animationTimingFunction=this.animationTimingFunction}},{key:"hideElement",value:function(){this.el.style.visibility="hidden",this.el.classList.remove(this.animationName),this.el.style.animationDuration="",this.el.style.animationDelay="",this.el.style.animationTimingFunction=""}},{key:"animateEls",value:function(e,t){var i=this;e.forEach(function(e){i.animationName=i.el.getAttribute("data-anim-name"),i.animationName&&(i.getAnimationOptions(),i.state.enter||i.hideElement(),e.isIntersecting&&!i.state.animating?(i.state.enter=!0,i.state.animating=!0,i.iteration+=1,i.showElement(),i.delay=1e3*(+i.animationDuration.slice(0,-1)+ +i.animationDelay.slice(0,-1)),setTimeout(function(){i.state.animating=!1,i.iteration>=i.animationIterations&&!i.options.infinite&&(i.onComplete&&i.onComplete(),t.unobserve(i.el),i.showElement())},i.delay),i.onEnter&&i.onEnter()):((0<i.animationIterations&&!i.state.animating||i.options.infinite&&!i.state.animating||!i.state.animating&&!i.state.enter)&&i.hideElement(),i.options.infinite?i.state.enter=!1:i.state.animating?setTimeout(function(){i.state.enter=!1},i.delay):i.state.enter=!1))})}},{key:"observe",value:function(){this.observer=new IntersectionObserver(this.animateEls.bind(this),this.options.observer),this.observer.observe(this.el)}},{key:"unobserve",value:function(){this.observer.unobserve(this.el),this.showElement()}}]),i}();module.exports=Anim;
