"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(i,!0).forEach(function(t){_defineProperty(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var defaultParameters={observer:{},infinite:!1},Anim=function(){function i(t,e){_classCallCheck(this,i),this.el=t,this.options=_objectSpread2({},defaultParameters,{},e),this.iteration=0,this.delay=1e3,this.state={enter:!1,animating:!1}}return _createClass(i,[{key:"init",value:function(){this.animate()}},{key:"getAnimationOptions",value:function(){this.animationDuration=this.el.getAttribute("data-anim-duration")||"1s",this.animationDelay=this.el.getAttribute("data-anim-delay")||"0s",this.animationIterations=+this.el.getAttribute("data-anim-iterations")||1,this.animationTimingFunction=this.el.getAttribute("data-anim-ease")||"ease"}},{key:"showElement",value:function(){this.el.style.visibility="visible",this.el.classList.add(this.animationName),this.el.style.animationDuration=this.animationDuration,this.el.style.animationDelay=this.animationDelay,this.el.style.animationTimingFunction=this.animationTimingFunction}},{key:"hideElement",value:function(){this.el.style.visibility="hidden",this.el.classList.remove(this.animationName),this.el.style.animationDuration="",this.el.style.animationDelay="",this.el.style.animationTimingFunction=""}},{key:"animateEls",value:function(t,e){var i=this;t.forEach(function(t){i.animationName=i.el.getAttribute("data-anim-name"),i.animationName&&(i.getAnimationOptions(),i.state.enter||i.hideElement(),t.isIntersecting&&!i.state.animating?(i.state.enter=!0,i.state.animating=!0,i.iteration+=1,i.showElement(),i.delay=1e3*(+i.animationDuration.slice(0,-1)+ +i.animationDelay.slice(0,-1)),setTimeout(function(){i.state.animating=!1,i.iteration>=i.animationIterations&&!i.options.infinite&&(i.onComplete&&i.onComplete(),e.unobserve(i.el),i.showElement())},i.delay),i.onEnter&&i.onEnter()):((0<i.animationIterations&&!i.state.animating||i.options.infinite&&!i.state.animating||!i.state.animating&&!i.state.enter)&&i.hideElement(),i.options.infinite?i.state.enter=!1:i.state.animating?setTimeout(function(){i.state.enter=!1},i.delay):i.state.enter=!1))})}},{key:"animate",value:function(){this.observer=new IntersectionObserver(this.animateEls.bind(this),this.options.observer),this.observer.observe(this.el)}}]),i}();module.exports=Anim;
